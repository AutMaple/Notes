# Shell 入门

## 快速使用

在编写 shell 脚本的时候，需要在脚本的第一行加上如下语句

```bash
#!/bin/bash
```

其中的 `#!` 是一种约定，该标记告诉系统，该脚本该使用何种解释器来执行

在文件中输入如下代码

```bash
#!/bin/bash

echo "Hello Shell"
```

执行该脚本将在命令行中输出：`Hello Shell`

## 变量

### 创建变量

声明一个变量和 python 声明变量是一样的，要使用变量时，直接写变量名并进行赋值，例如

```bash
username="AutMaple"
password="111111"
```

其中需要注意的就是，等号的两边不能够有空格

#### 只读型变量

如果想创建一个不能够修改的变量，可以在变量名前使用 `readonly` 关键字进行声明,例如

```bash
readonly username="AutMaple"
# username="111111"
```

此时如果试图去修改变量 `username` 的值，会出现如下的错误信息

```txt
username：只读变量
```

### 删除变量

如果要删除一个变量，可以使用 `unset` 关键字, 例如

```bash
unset password
```

### 使用变量

要在其他的地方使用声明过的变量时，可以使用 `$+变量名` 的方式使用对应的变量，
在使用变量时，对应的变量名可以使用 `{}` 进行包裹，也可以不使用 `{}` 进行包裹，
建议对全部变量的使用都是 `{}` 包裹起来

```bash
username="AutMaple"
echo "Hello ${username}"
```

执行上述语句，将会在终端中输出 `Hello AutMaple`

### 变量类型

运行 shell 时，会存在三种类型的变量

- 局部变量 ==> 只在当前 shell 中有效，其他的 shell 启动的程序无法访问局部变量

- 环境变量 ==> 所有的 shell 程序都可以访问的变量

- 系统变量 ==> 该变量是由 shell 程序设置的变量，这些变量中，有的是环境变量，
有的是局部变量，这些变量的设置，都是用于保证 shell 程序的正常运行

#### 常用的系统变量

| 变量名 | 含义                                                               |
|:------:|:------------------------------------------------------------------:|
| $n     | 表示传递给脚本的第 n 个参数, $1 表示第 1 个参数，$2 表示第二个参数 |
| $#     | 脚本的参数个数                                                     |
| $*     | 以"参数1 参数2 参数3"的形式返回所有参数的值                        |
| $@     | 以"参数" "参数2" "参数3"... 的形式返回参数的值                     |
| $0     | 脚本的文件名                                                       |
| $?     | 上一条命令的返回值                                                 |
| $$     | 返回本进程的进程号                                                 |

## 字符串

字符串不管在任何语言中，都是非常重要的存在

在 shell 脚本中，字符串有两种形式，一种是用双引号 `""` 包裹起来的字符串,
另一种是用但引号 `''` 包裹起来的字符串，例如

```bash
username="AutMaple"
username2='AUtMaple609'
```
这两种方式声明的字符串变量都是可行的，那么这两种不同形式的字符串有什么区别呢？

### 单引号和双引号的区别

1. 单引号中的任何字符都会进行原样的输出，在单引号字符串中使用变量,
shell 程序并不会将字符串对应的值进行替换

2. 单引号字串中不能出现单独一个的单引号(对单引号使用转义符后也不行)，
但可成对出现，作为字符串拼接使用

3. 双引号中可以有变量，也可以存在转义字符

例如

```bash
#!/bin/sh

username="AutMaple"
str1='111 ${username}'
str2='111 '${username}''
str3="111 ${username}"


echo ${str1}
echo ${str2}
echo ${str3}
```

上述代码的输出如下

```txt
111 ${username}
111 AutMaple
111 AutMaple
```

### 获取字符串的长度

获取字符串长度可以使用 `${#变量名}` 的方式获取字符串的长度

```bash
username="AutMaple"
echo ${#username}
```

执行代码之后输出为 `8`

### 截取字符串

要获取字符串的某一部分可以使用 `${varName:start:count}` 来截取字符串, 例如

```bash
username="AutMaple"
echo ${username:0:3}
```

执行结果：Aut

## 数组

bash 中只支持定义一维数组，定义数组的方式：

```bash
arrName=(val1 val2 val3 val4)
```

可以使用 `${arrName[index]}` 的方式访问数组中下标为 index 的元素

### 获取数组的长度

可以使用如下方式获取数组的长度

```bash
length1=${#arrName[@]}
length2=${#arrName[*]}
```

